/**
 * Auto-growing textareas; technique ripped from Facebook
 * http://github.com/jaz303/jquery-grab-bag/tree/master/javascripts/jquery.autogrow-textarea.js
 */
!function(e){e.fn.autogrow=function(t){return this.filter("textarea").each(function(){var n=this,a=e(n),o=a.height(),r=a.hasClass("autogrow-short")?0:parseInt(a.css("lineHeight"))||0,l=e.extend({preGrowCallback:null,postGrowCallback:null},t),i=e("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:a.width(),fontSize:a.css("fontSize"),fontFamily:a.css("fontFamily"),fontWeight:a.css("fontWeight"),lineHeight:a.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),s=function(e){var t=function(e,t){for(var n=0,a="";t>n;n++)a+=e;return a},s=n.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(e){return t("&nbsp;",e.length-1)+" "});e&&e.data&&"keydown"===e.data.event&&13===e.keyCode&&(s+="<br />"),i.css("width",a.width()),i.html(s+(0===r?"...":""));var c=Math.max(i.height()+r,o);null!=l.preGrowCallback&&(c=l.preGrowCallback(a,i,c,o)),a.height(c),null!=l.postGrowCallback&&l.postGrowCallback(a)};a.change(s).keyup(s).keydown({event:"keydown"},s),e(window).resize(s),s()})}}(jQuery);